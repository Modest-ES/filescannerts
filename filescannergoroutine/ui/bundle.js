(()=>{"use strict";var n={115:(n,t,e)=>{e.d(t,{A:()=>l});var i=e(601),a=e.n(i),o=e(314),r=e.n(o)()(a());r.push([n.id,"@keyframes gradient {\n\t0% {\n\t\tbackground-position: 0% 50%;\n\t}\n\t50% {\n\t\tbackground-position: 100% 50%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 50%;\n\t}\n}\n\n@keyframes shining {\n\t0% {\n\t\tbackground-position: 100% 50%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 50%;\n\t}\n}\n\n@keyframes load-animation-rotate {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n* {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    outline: none;\n    font-family: 'Montserrat', 'Roboto', system-ui, sans-serif;\n    box-sizing: border-box;\n}\n\nhtml {\n    scroll-behavior: smooth;\n}\n\nbody {\n    background: rgb(20, 20, 20);\n    /* background: linear-gradient(45deg, rgb(35, 104, 237), rgb(20, 20, 20) 19%, rgb(35, 35, 35) 50%, rgb(20, 20, 20) 79%, rgb(35, 104, 237)); */\n    background-attachment: fixed;\n    background-size: 400% 400%;\n    animation: gradient 35s ease infinite;\n    height: 100vh;\n    padding: 0;\n    margin: 0;\n    height: 100%;\n}\n\nbutton {\n    background: 0;\n    border: 0;\n    cursor: pointer;\n}\n\na {\n    text-decoration: none;\n}\n\np {\n    font-size: 14px;\n    font-family: 'Montserrat';\n    color: white;\n}\n\n.load-animation,\n.load-animation div,\n.load-animation div:after {\n  box-sizing: border-box;\n}\n.load-animation {\n  display: block;\n  color: rgb(35, 104, 237);\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  top: 2%;\n  left: 2%;\n  /* transform: translate(-50%, -50%); */\n  z-index: 0;\n}\n.load-animation div {\n  animation: load-animation-rotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  transform-origin: 40px 40px;\n}\n.load-animation div:after {\n  content: \" \";\n  display: block;\n  position: absolute;\n  width: 7.2px;\n  height: 7.2px;\n  border-radius: 50%;\n  background: currentColor;\n  margin: -3.6px 0 0 -3.6px;\n}\n.load-animation div:nth-child(1) {\n  animation-delay: -0.036s;\n}\n.load-animation div:nth-child(1):after {\n  top: 62.62742px;\n  left: 62.62742px;\n}\n.load-animation div:nth-child(2) {\n  animation-delay: -0.072s;\n}\n.load-animation div:nth-child(2):after {\n  top: 67.71281px;\n  left: 56px;\n}\n.load-animation div:nth-child(3) {\n  animation-delay: -0.108s;\n}\n.load-animation div:nth-child(3):after {\n  top: 70.90963px;\n  left: 48.28221px;\n}\n.load-animation div:nth-child(4) {\n  animation-delay: -0.144s;\n}\n.load-animation div:nth-child(4):after {\n  top: 72px;\n  left: 40px;\n}\n.load-animation div:nth-child(5) {\n  animation-delay: -0.18s;\n}\n.load-animation div:nth-child(5):after {\n  top: 70.90963px;\n  left: 31.71779px;\n}\n.load-animation div:nth-child(6) {\n  animation-delay: -0.216s;\n}\n.load-animation div:nth-child(6):after {\n  top: 67.71281px;\n  left: 24px;\n}\n.load-animation div:nth-child(7) {\n  animation-delay: -0.252s;\n}\n.load-animation div:nth-child(7):after {\n  top: 62.62742px;\n  left: 17.37258px;\n}\n.load-animation div:nth-child(8) {\n  animation-delay: -0.288s;\n}\n.load-animation div:nth-child(8):after {\n  top: 56px;\n  left: 12.28719px;\n}\n\n.display-none {\n    display: none !important;\n}\n\n.main-shell {\n    z-index: 1;\n    width: 80%;\n    margin: 2vh 10%;\n    height: 96vh;\n    padding: 10px;\n    background: linear-gradient(-45deg, rgb(40, 40, 40), rgb(70, 70, 70));\n    border-radius: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n\nheader {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 6px;\n    margin-bottom: 15px;\n}\n\n.left-side, .right-side {\n    display: flex;\n    align-items: center;\n}\n\n.left-side {\n    justify-content: flex-start;\n    margin-right: 10px;\n}\n\n.right-side {\n    justify-content: flex-end;\n}\n\n.btn-back {\n    margin-right: 6px;\n    color: white;\n    transition: 0.2s;\n}\n\n.btn-back img {\n    background-color: rgb(85, 85, 85);\n    border-radius: 100%;\n    transition: 0.2s;\n    width: 20px;\n    height: 20px;\n    padding: 10px;\n    box-sizing: content-box;\n}\n\n.btn-back:hover img {\n    transform: scale(1.04);\n    background: rgb(110, 110, 110);\n}\n\n.blocked-btn {\n    cursor:not-allowed;\n    pointer-events: none;\n}\n\n.blocked-btn img {\n    background-color: rgba(251, 47, 47, 0.3);\n}\n\n.blocked-btn:hover img {\n    background: rgba(251, 47, 47, 0.5) !important;\n}\n\nh2 {\n    font-family: 'Roboto';\n    font-size: 14px;\n    color: white;\n    word-break: break-all;\n}\n\n.loadtime {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    text-align: center;\n}\n\n.btn-sort {\n    display: flex;\n    align-items: center;\n    color: white;\n    margin-left: 10px;\n}\n\n.btn-sort img {\n    background-color: rgb(85, 85, 85);\n    border-radius: 100%;\n    transition: 0.2s;\n    width: 20px;\n    height: 20px;\n    padding: 10px;\n    margin-left: 5px;\n    box-sizing: content-box;\n}\n\n.btn-sort:hover img {\n    transform: scale(1.04);\n    background: rgb(110, 110, 110);\n}\n\n.btn-stats {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.content {\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n    flex-grow: 1;\n    padding: 1%;\n}\n\n.error-message {\n    background: rgba(251, 47, 47, 0.3);\n}\n\n.error-message, .null-element {\n    border-radius: 20px;\n    padding: 10px;\n    display: flex;\n    align-items: center;\n}\n\n.error-message img, .null-element img {\n    width: 20px;\n    height: 20px;\n}\n\n.error-message p, .null-element p {\n    font-family: 'Montserrat';\n    font-size: 12px;\n    word-break: break-all;\n    margin-left: 5px;\n}\n\n.null-element {\n    background: rgba(254, 185, 22, 0.3);\n}\n\n.fileline {\n    background: rgb(80, 80, 80);\n    margin-bottom: 10px;\n    padding: 5px;\n    border-radius: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    transition: 0.2s ease;\n    cursor: pointer;\n}\n\n.fileline:hover {\n    transform: scale(1.01);\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);\n    background: linear-gradient(45deg, rgb(100, 100, 100) 0%, rgb(100, 100, 100) 47%, rgb(155, 155, 155) 50%, rgb(100, 100, 100) 53%, rgb(100, 100, 100) 100%);\n    background-size: 500% 500%;\n    animation: shining 3s ease infinite;\n}\n\n.file-type {\n    display: flex;\n    align-items: center;\n}\n\n.file-type img {\n    margin-right: 3px;\n    width: 20px;\n    height: 20px;\n}\n\n.file-type, .file-size {\n    width: 14%;\n}\n\n.file-name {\n    width: 70%;\n    word-break: break-all;\n}\n\nfooter {\n    margin-top: 5px;\n}\n\n@media (max-width: 1000px) {\n    .main-shell {\n        width: 94%;\n        margin-left: 3%;\n    }\n}\n\n@media (max-width: 560px) {\n    header p, header h2, .file-name, .file-size, .file-type p {\n        font-size: 12px;\n    }\n    \n    .file-type {\n        width: 20%;\n    }\n\n    .file-name {\n        width: 64%;\n    }\n}\n\n@media (max-width: 420px) {\n    .file-type p {\n        display: none;\n    }\n\n    .right-side, .left-side {\n        flex-direction: column;\n    }\n\n    .btn-back img, .btn-sort img {\n        padding: 5px;\n    }\n\n    .btn-back img {\n        margin-left: 0;\n    }\n\n    .btn-back img, .btn-sort img {\n        width: 15px;\n        height: 15px;\n    }\n\n    .file-name {\n        width: 69%;\n    }\n\n    .file-size {\n        width: 19%;\n    }\n\n    .file-type {\n        width: 10%;\n    }\n}\n\n@media (max-width: 300px) {\n    header h2 {\n        font-size: 10px;\n    } \n}",""]);const l=r},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",i=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),i&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),i&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,i,a,o){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(i)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(r[d]=!0)}for(var s=0;s<n.length;s++){var c=[].concat(n[s]);i&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),e&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=e):c[2]=e),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var t=[];function e(n){for(var e=-1,i=0;i<t.length;i++)if(t[i].identifier===n){e=i;break}return e}function i(n,i){for(var o={},r=[],l=0;l<n.length;l++){var d=n[l],s=i.base?d[0]+i.base:d[0],c=o[s]||0,m="".concat(s," ").concat(c);o[s]=c+1;var p=e(m),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var u=a(h,i);i.byIndex=l,t.splice(l,0,{identifier:m,updater:u,references:1})}r.push(m)}return r}function a(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,a){var o=i(n=n||[],a=a||{});return function(n){n=n||[];for(var r=0;r<o.length;r++){var l=e(o[r]);t[l].references--}for(var d=i(n,a),s=0;s<o.length;s++){var c=e(o[s]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},659:n=>{var t={};n.exports=function(n,e){var i=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var i="";e.supports&&(i+="@supports (".concat(e.supports,") {")),e.media&&(i+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(i+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),i+=e.css,a&&(i+="}"),e.media&&(i+="}"),e.supports&&(i+="}");var o=e.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},t={};function e(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={id:i,exports:{}};return n[i](o,o.exports,e),o.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0,(()=>{var n=e(72),t=e.n(n),i=e(825),a=e.n(i),o=e(659),r=e.n(o),l=e(56),d=e.n(l),s=e(540),c=e.n(s),m=e(113),p=e.n(m),h=e(115),u={};u.styleTagTransform=p(),u.setAttributes=d(),u.insert=r().bind(null,"head"),u.domAPI=a(),u.insertStyleElement=c(),t()(h.A,u),h.A&&h.A.locals&&h.A.locals;class g{constructor(n){this.mainShellElement=document.getElementById("directory-info"),this.controller=n}displayLoadElement(){}hideLoadElement(){}displayDirectoryData(n,t){if(this.mainShellElement){this.mainShellElement.innerHTML="";const e=this.createHeaderElement(n,t);this.mainShellElement.appendChild(e);const i=this.createContentElement(n);this.mainShellElement.appendChild(i);const a=this.createFooterElement();this.mainShellElement.appendChild(a)}}createHeaderElement(n,t){const e=document.createElement("header"),i=this.createLeftSideElement(n,t);e.appendChild(i);const a=this.createRightSideElement(n,t);return e.appendChild(a),e}createLeftSideElement(n,t){const e=document.createElement("div");e.classList.add("left-side");const i=document.createElement("button");i.classList.add("btn-back");const a=new URLSearchParams(window.location.search);"/home"==a.get("root")&&i.classList.add("blocked-btn"),i.addEventListener("click",(()=>this.controller.onBtnBackClicked()));const o=document.createElement("img");o.src="ui/img/leftarrow.png",o.alt="Back",o.title="/home"==a.get("root")?"/home это корневая директория":"Предыдущая директория",i.appendChild(o),e.appendChild(i);const r=document.createElement("a");r.classList.add("btn-stats"),r.href=`http://localhost:80/uistats.php?root=${n.RootPath}&sort=${t}`;const l=document.createElement("button");l.classList.add("btn-back");const d=document.createElement("img");d.src="ui/img/stats.png",d.alt="Stats",d.title="Посмотреть статистику",l.appendChild(d),r.appendChild(l),e.appendChild(r);const s=document.createElement("h2");return s.textContent=`Директория: ${n.RootPath}`,e.appendChild(s),e}createRightSideElement(n,t){const e=document.createElement("div");e.classList.add("right-side");const i=document.createElement("div");i.classList.add("loadtime");const a=document.createElement("p");a.textContent="Время подсчета:",i.appendChild(a);const o=document.createElement("p");if(o.textContent=n.Duration,i.appendChild(o),e.appendChild(i),0==n.Status){const n=document.createElement("button");n.classList.add("btn-sort"),n.addEventListener("click",(()=>this.controller.onBtnSortClicked()));const i=document.createElement("p");i.textContent="Сортировка:",n.appendChild(i);const a=document.createElement("img");a.src="asc"==t?"ui/img/sortasc.png":"ui/img/sortdesc.png",a.alt=t,a.title="asc"==t?"По возрастанию":"По убыванию",n.appendChild(a),e.appendChild(n)}return e}createContentElement(n){const t=document.createElement("div");if(t.classList.add("content"),0!=n.Status){const e=this.createErrorElement(n);t.appendChild(e)}if(null==n.FilesList){const n=this.createNullElement();t.appendChild(n)}else n.FilesList.forEach((n=>{const e=this.createFilelineElement(n);t.appendChild(e)}));return t}createErrorElement(n){const t=document.createElement("div");t.classList.add("error-message");const e=document.createElement("img");e.src="ui/img/error.png",e.alt="Error",e.title=n.ErrorMessage,t.appendChild(e);const i=document.createElement("p");return i.textContent=n.ErrorMessage,t.appendChild(i),t}createNullElement(){const n=document.createElement("div");n.classList.add("null-element");const t=document.createElement("img");t.src="ui/img/warning.png",t.alt="Warning",t.title="Текущая директория пустая",n.appendChild(t);const e=document.createElement("p");return e.textContent="Текущая директория пустая",n.appendChild(e),n}createFilelineElement(n){const t=document.createElement("div");t.classList.add("fileline"),"Folder"==n.FileType&&t.addEventListener("click",(()=>this.controller.onFilelineClicked(n)));const e=document.createElement("div");e.classList.add("file-type");const i=document.createElement("img");i.src="Folder"==n.FileType?"ui/img/folder.png":"ui/img/file.png",i.alt=n.FileType,i.title=n.FileType,i.width=20,i.height=20,e.appendChild(i);const a=document.createElement("p");a.textContent=n.FileType,e.appendChild(a),t.appendChild(e);const o=document.createElement("p");o.classList.add("file-name"),o.textContent=n.FileName,t.appendChild(o);const r=document.createElement("p");return r.classList.add("file-size"),r.textContent=n.FileSizeString,t.appendChild(r),t}createFooterElement(){const n=document.createElement("footer"),t=document.createElement("p");return t.textContent="® File Scanner 2024",n.appendChild(t),n}}const f=new class{constructor(){this.data=null}verifyUrlParameters(){const n=new URLSearchParams(window.location.search),t=document.getElementById("load-animation");if(t&&(t.style.opacity="1"),!n.has("sort")){const n=new URL(window.location.href);n.searchParams.set("sort","asc"),window.location.href=n.toString()}if(!n.has("root")){const n=new URL(window.location.href);n.searchParams.set("root","/home"),window.location.href=n.toString()}}getSortParameter(){return new URLSearchParams(window.location.search).get("sort")||""}constructUrl(){const n=new URLSearchParams(window.location.search),t=n.get("sort"),e=n.get("root");let i="./files";return e&&(i+=`?root=${e}`),i+=t?`&sort=${t}`:"&sort=asc",i}fetchData(n){return t=this,e=void 0,a=function*(){try{const t=yield fetch(n),e=yield t.json();this.data=e;const i=document.getElementById("load-animation");i&&(i.style.opacity="0")}catch(n){console.error("Ошибка считывания данных из json: ",n)}},new((i=void 0)||(i=Promise))((function(n,o){function r(n){try{d(a.next(n))}catch(n){o(n)}}function l(n){try{d(a.throw(n))}catch(n){o(n)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(n){n(e)}))).then(r,l)}d((a=a.apply(t,e||[])).next())}));var t,e,i,a}},b=new class{constructor(n){this.model=n,this.view=new g(this)}loadDirectoryData(){this.view.displayLoadElement(),this.model.verifyUrlParameters(),this.model.fetchData(this.model.constructUrl()).then((()=>{this.view.displayDirectoryData(this.model.data,this.model.getSortParameter())})),this.view.hideLoadElement()}onBtnBackClicked(){const n=new URLSearchParams(window.location.search),t=n.get("root").lastIndexOf("/"),e=n.get("root").substring(0,t),i=`${window.location.pathname}?root=${e||n.get("root")}&sort=${n.get("sort")}`;window.history.pushState({path:i},"",i),this.loadDirectoryData()}onBtnSortClicked(){const n=new URLSearchParams(window.location.search);let t=n.get("sort");t="desc"===t?"asc":"desc";const e=`${window.location.pathname}?root=${n.get("root")}&sort=${t}`;window.history.pushState({path:e},"",e),this.loadDirectoryData()}onFilelineClicked(n){const t=new URLSearchParams(window.location.search),e=`${window.location.pathname}?root=${t.get("root")}/${n.FileName}&sort=${t.get("sort")}`;window.history.pushState({path:e},"",e),this.loadDirectoryData()}}(f);b.loadDirectoryData()})()})();